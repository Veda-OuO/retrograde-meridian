---
import Layout from './_layout.astro';

interface Props {
  mysteryId: string;
}

const { mysteryId } = Astro.props;
---

<Layout title="Rules" pageId="rules" mysteryId={mysteryId} backgroundImage="/assets/rules-crossfire.jpg">
  <div class="title">Rules</div>
  
  <div class="text-box">
<p><strong>Goal:</strong></p>
<p><span style="font-weight: 400;">&nbsp;</span></p>
<p><span style="font-weight: 400;">Learn as much as you can about the events surrounding the death of Emilia Brooks before time runs out!</span></p>
<p>&nbsp;</p>
<p><strong>Investigation:</strong></p>
<p><span style="font-weight: 400;">&nbsp;</span></p>
<p><span style="font-weight: 400;">To conduct your investigation, first, read the </span><strong>Introduction tab</strong><span style="font-weight: 400;"> to learn the basic information of the case. It is then up to you to determine which leads you will follow. Each </span><strong>Suspect</strong><span style="font-weight: 400;"> and </span><strong>Location</strong><span style="font-weight: 400;"> you visit will cost you one </span><strong>Investigative Hour</strong><span style="font-weight: 400;">, but many will provide information critical to solving the case.</span></p>
<p><span style="font-weight: 400;">&nbsp;</span></p>
<p><span style="font-weight: 400;">To </span><strong>interview a specific person</strong><span style="font-weight: 400;">, find their name in the Suspect section. Be careful, though: some suspects may know more than others.</span></p>
<p><span style="font-weight: 400;">&nbsp;</span></p>
<p><span style="font-weight: 400;">To </span><strong>search a Location</strong><span style="font-weight: 400;">, find the corresponding place in the Train Cars and Passenger Car sections. Locations can yield physical evidence essential to solving the case, or nothing at all.</span></p>
<p><span style="font-weight: 400;">&nbsp;</span></p>
<p><span style="font-weight: 400;">&nbsp;</span></p>
<p><span style="font-weight: 400;">At the start of the game, some tabs are locked. The Exam and Whodunit Tabs will unlock after your investigation is concluded. The tabs in the Locked Area section will unlock if you meet the people or find the right items to gain access to them.</span></p>
<p><span style="font-weight: 400;">&nbsp;</span></p>
<p><span style="font-weight: 400;">&nbsp;After you complete the Exam, reference the chart below to learn how well you conducted your investigation!&nbsp;</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">Good luck, Detective!</span></p>
<p>&nbsp;</p>
  
  </div>
  
  <div class="bottom-image">
    <img src={`/assets/PointsComparisonChart-WW.png`} alt="Points comparison chart" class="bottom-image-style">
  </div>
  
  <div class="rules-action-buttons">
    <button id="solveCase" class="rules-game-button rules-solve-button">Solve Case</button>
    <button id="resetCase" class="rules-game-button rules-reset-button">Reset Case</button>
  </div>
</Layout>

<style is:global>
  body {
    background-image: url('/assets/rules-crossfire.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;
    min-height: 100vh;
  }

  .title {
    font-size: 100px;
    color: rgb(255, 166, 0);
    text-shadow: 0 0 10px rgb(0, 0, 0);
    padding: 10px;
    margin-bottom: 20px;
  }
  
  .rules-action-buttons {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 30px 0;
  }
  
  .rules-game-button {
    padding: 15px 30px;
    font-size: 18px;
    font-weight: bold;
    font-family: Georgia, serif;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    transition: all 0.2s ease;
    border: none;
  }
  
  .rules-solve-button {
    background-color: #3498db !important;
    color: white !important;
    border: 2px solid #2980b9 !important;
  }
  
  .rules-solve-button:hover {
    background-color: #2980b9 !important;
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
  }
  
  .rules-solve-button:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  }
  
  .rules-reset-button {
    background-color: #8B0000 !important;
    color: white !important;
    border: 2px solid #ff6b6b !important;
  }
  
  .rules-reset-button:hover {
    background-color: #a00000 !important;
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
  }
  
  .rules-reset-button:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  }
  
  @media (max-width: 768px) {
    .title { font-size: 40px; margin-top: 50px; }
    .rules-action-buttons { flex-direction: column; align-items: center; }
    .rules-game-button { width: 80%; }
  }
  
  @media (max-width: 480px) {
    .title { font-size: 30px; }
    .rules-game-button { width: 100%; font-size: 16px; padding: 12px 20px; }
  }
</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const solveCaseButton = document.getElementById('solveCase');
  if (solveCaseButton) {
    solveCaseButton.addEventListener('click', () => {
      if (confirm('Are you sure you want to solve the case now? This will prevent you from exploring further leads and take you straight to the exam page.')) {
        localStorage.setItem("timeReachedZero", "true");
        localStorage.setItem("examUnlocked", "true");
        alert('The Exam is now unlocked. You can proceed to submit your answers.');
        window.location.reload();
      }
    });
  }
  
  const resetCaseButton = document.getElementById('resetCase');
  if (resetCaseButton) {
    resetCaseButton.addEventListener('click', () => {
      if (confirm('Are you sure you want to reset this case? All your progress will be lost.')) {
        localStorage.clear();
        window.location.href = `/retrograde-meridian/intro`;
      }
    });
  }
});
</script>